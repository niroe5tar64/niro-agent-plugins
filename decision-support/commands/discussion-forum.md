---
description: 複数ロールの議論を起動し、要約テンプレとログ保存先提案を出力する
argument-hint: [テーマ(任意)]
---

# Discussion Forum

## 目的
- `/discussion-forum` で議論を起動し、7ステップのワークフローに沿って進行する。
- 最終的に `summary.template.md` 形式の要約とログ保存先の提案を出す。

## 入力
1) テーマ（必須）
2) ゴール（必須）
3) 参加ロール（選択式、デフォルトあり）
4) ターン上限（任意、デフォルト3）

## デフォルト
- 参加ロール: `facilitator + architect + ops-cost`
- ターン上限: `3`

## 終了条件

### ターンの定義
- facilitator が要約（決定/保留/宿題）を出すまでを1ターンとする

### 通常終了
以下のいずれかで終了：
- ターン上限に到達
- facilitator が「収束した」と判断
- ユーザーが「終了」「クロージングへ」と指示

### 延長
- ユーザーが「続けて」と指示した場合、+1ターン延長

### 強制終了
- 10ターン到達で強制的にクロージングへ移行

## 実行手順

### Step 0: ドキュメント

以下のドキュメントに従って進行する。

#### ロール定義

# ロール叩き台（識別子 / 役割と出力フォーマット）

- 共通: 箇条書き 3 点以内。根拠を簡潔に添える。推測は「推測: ...」と明示。

- `facilitator`  
  - 役割: 司会/進行。論点提示、発言順管理、要約と収束、終了条件確認を担当。推測は質問に変換し、曖昧な点を潰す。  
  - 出力: 次ターンの論点/質問、現時点の要約（決定/保留/宿題）、終了条件の確認。

- `pm-ux`  
  - 役割: 課題と価値仮説、スコープ/優先度、代表ユーザフロー、摩擦点と入力負荷、成功指標や計測案を示す。  
  - 出力: 課題/価値仮説、代表フロー（1-2 ステップ）、摩擦点、計測案。

- `architect`  
  - 役割: システム構成、責務分離、拡張性と技術的負債の見立て。依存関係やインタフェース設計に注意を向ける。  
  - 出力: アーキ概要、責務/インタフェースの要点、拡張性と負債リスク、前提条件。

- `ops-cost`  
  - 役割: デプロイ/監視/SLO、運用負荷、コスト見積りと抑制策。運用時の手離れの良さを重視。  
  - 出力: 運用フロー、監視/SLO の要点、コスト影響（高中低）と抑制策、運用上の懸念。

- `risk-security`
  - 役割: 認証/認可、データ保護、ロギング/監査、サプライチェーンリスクをカバーし、反例・失敗シナリオで前提の妥当性を検証する。
  - 出力: 認証/認可・データ保護の懸念、ロギング/監査、サプライチェーンリスク、失敗シナリオと回避策。

## ロール選定ガイド

### 必須ロール
- `facilitator`: 常に必要（議論の進行・要約を担当）

### 推奨ロール組み合わせ

**技術仕様・構成が主体**
- `architect` + `ops-cost`
- 必要に応じて: `risk-security`

**ユーザー影響が大きい**
- `pm-ux` + `architect`
- 必要に応じて: `risk-security`, `ops-cost`

**運用・コスト・セキュリティが主体**
- `ops-cost` + `risk-security`
- 必要に応じて: `architect`

**全体的な検討**
- `pm-ux` + `architect` + `ops-cost` + `risk-security`
- facilitator がバランスを取る

### ロール追加時の基準

新しいロールを追加する前に以下を確認：

1. **専門性の確認**: 既存ロール（5つ）でカバーできない領域か？
   - PM/UX、アーキテクチャ、運用/コスト、セキュリティ、司会の5軸を超える視点が必要か

2. **責務の明確化**
   - 他ロールとの責務境界を明記できるか
   - 出力フォーマット（3点以内、根拠付き）を定義できるか

3. **再現性の確保**
   - 同じロール名で毎回同じ視点を提供できるか
   - 役割説明だけで、ロール担当者が一貫性を保てるか

### 小規模議論での省略

議論のスコープが限定的な場合は、必須ロール（facilitator）+ 関連する推奨ロール 1-2 個で進行してもよい。

例：
- 簡易な機能検討 → facilitator + pm-ux
- インフラ構成決定 → facilitator + architect + ops-cost

#### ワークフロー

# 司会プロンプト叩き台（実運用サイクル）

ハイブリッド運用（司会型ベース、必要箇所のみ順次収集＋要約統合）の進め方。

1) ゴール/終了条件を宣言
   - 目的、決定/保留の判定基準、ターン上限を明示。
2) 参加ロールと出力ルールを共有
   - 例: `pm-ux, architect, ops-cost, risk-security`。
   - 共通ルール: 箇条書き3点以内、根拠を添える、推測は明示。
3) 初回シリアル収集
   - 全ロールから1ターンで意見を集め、`facilitator` が要約（決定/保留/宿題）と次ターン質問を提示。
4) 論点絞り込み
   - 深掘り論点を2–3個に限定し、必要なものだけ順次で意見収集。
5) 順次収集→要約統合
   - 収集結果を `facilitator` が重複圧縮し、決定/保留/宿題を更新。推測は質問に変換。
6) リスクチェック
   - `risk-security` と `ops-cost` に1ターン与え、見落としリスクと運用懸念を表面化。
7) クロージング
   - `facilitator` が最終要約（決定/保留/宿題、理由と代替案、次アクション）を提示して終了。

#### 要約テンプレート

---
date: YYYY-MM-DD
topic: <topic>
participants: [] # 参加者/ロールを記載
tags: [] # docs/decisions/guide/tags.md から選択
---

# Summary
- （ここに結論と主要論点を 5–10 行で要約）

## Decision
- （決まったことを箇条書きで）

## Notes
- （議事メモ的に箇条書き）

## Open / TODO
- （宿題や保留事項を箇条書き）

#### ログ運用

# ログ運用（命名と配置）

## ディレクトリ構造

- `docs/decisions/logs/YYYY-MM-DD-topic/`
  - `summary.md`: 要約ログ（決定/保留/宿題、理由と代替案、次アクションを含める）
  - `NN-role-raw.md`: 生ログ。`NN` は議論順の番号、`role` は識別子（例: `01-facilitator-raw.md`）

## 命名

- ディレクトリ: `YYYY-MM-DD-topic`（スペースはハイフン、短めのトピック名）
- 要約: `summary.md`
- 生ログ: `NN-role-raw.md`（`01-` から始め、並列取得なら同じ番号＋異なるロール）

## フロントマター（要約）

```yaml
---
date: YYYY-MM-DD
topic: <topic>
participants:
  - facilitator
  - pm-ux
  - architect
  - ops-cost
  - risk-security
tags:
  - arch
  - process
  - product
---
```

## 運用メモ

- 並列生成を行う場合は、同じ番号でロール違いの生ログを並べる（例: `02-architect-raw.md`, `02-risk-security-raw.md`）。
- 要約には必ず「決定/保留/宿題」「採用理由」「代替案」「次アクション」を含める。
- 生ログ不要な場合は `summary.md` のみでよいが、判断根拠が必要そうなときは要点だけでも `NN-role-raw.md` に残す。

### Step 1: 入力の収集
- `$ARGUMENTS` があればテーマ候補として使う。
- テーマとゴールは必須。欠けている場合は質問して補完する。
- 参加ロールはロール定義の識別子から選ばせる（複数可）。
- 参加ロールが未指定ならデフォルトを採用する。
- ターン上限が未指定ならデフォルトを採用する。

### Step 2: 議論の開始宣言
- 目的/終了条件、参加ロール、ターン上限を明示する。
- 共通ルール（箇条書き3点以内、根拠を添える、推測は明示）を共有する。

### Step 3: ワークフロー準拠で進行
- ワークフローの7ステップに従って議論を進行する。
- 各ロールから順次意見を収集する。
- `facilitator` が各ターンで要約（決定/保留/宿題）と次の質問を提示する。

### Step 4: 終了時の要約出力
- 要約テンプレートに準拠して要約を生成する。
- 要約には「決定/保留/宿題」「理由」「代替案」「次アクション」を含める。

### Step 5: ログ保存の提案
- ログ運用の命名規約に従い、保存先候補を提示する。
- 例: `docs/decisions/logs/YYYY-MM-DD-topic/summary.md`

## 期待する出力
- 議論の最終要約（テンプレ準拠）
- ログ保存先の提案
