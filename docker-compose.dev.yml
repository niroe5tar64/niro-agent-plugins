services:
  # Dev Container for development with Claude Code
  devcontainer:
    build:
      context: .
      dockerfile: Dockerfile.dev
      target: development
    container_name: niro-agent-plugins-devcontainer
    working_dir: /workspace
    command: sleep infinity
    volumes:
      # Mount source code
      - .:/workspace:cached
      # Persist Bun cache for faster installs
      - bun-cache:/home/dev-user/.bun
      # Persist git configuration
      - bun-config:/home/dev-user/.config
    environment:
      - NODE_ENV=development
      - TERM=xterm-256color
    networks:
      - niro-agent-plugins-network
    # Keep container running for interactive development
    stdin_open: true
    tty: true

networks:
  niro-agent-plugins-network:
    driver: bridge

volumes:
  bun-cache:
    driver: local
  bun-config:
    driver: local
